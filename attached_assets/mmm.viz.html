<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marketing Mix Modeling Pipeline Visualization</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f8fafc;
            color: #1e293b;
            line-height: 1.6;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background-color: white;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        h1 {
            color: #0f172a;
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            text-align: center;
            font-weight: 600;
        }
        h2 {
            color: #1e40af;
            font-size: 1.8rem;
            margin-top: 2rem;
            margin-bottom: 1rem;
            font-weight: 500;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 0.5rem;
        }
        h3 {
            color: #1e40af;
            font-size: 1.4rem;
            margin-top: 1.5rem;
            font-weight: 500;
        }
        .section {
            margin-bottom: 40px;
            padding: 30px;
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
        }
        .mermaid {
            margin: 30px 0;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: inset 0 2px 4px 0 rgb(0 0 0 / 0.05);
        }
        .mermaid svg {
            max-width: 100%;
            height: auto;
        }
        .mermaid .node rect {
            rx: 8;
            ry: 8;
            filter: drop-shadow(0 2px 2px rgba(0,0,0,0.1));
        }
        .mermaid .edgePath path {
            stroke-width: 2;
        }
        .mermaid .cluster rect {
            rx: 12;
            ry: 12;
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1));
        }
        .mermaid .cluster-label {
            font-weight: 600;
        }
        .table-description {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 24px;
            margin-top: 24px;
        }
        .table-card {
            padding: 24px;
            background-color: #f8fafc;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
            transition: transform 0.2s;
        }
        .table-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        }
        .metrics-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }
        .metrics-category {
            background-color: #f8fafc;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }
        .metrics-category h4 {
            color: #1e40af;
            margin-top: 0;
            margin-bottom: 12px;
            font-size: 1.1rem;
        }
        .metrics-category ul {
            margin: 0;
            padding-left: 20px;
        }
        .metrics-category li {
            margin-bottom: 8px;
            color: #334155;
        }
        .intro {
            text-align: center;
            max-width: 800px;
            margin: 0 auto 40px;
            color: #475569;
            font-size: 1.1rem;
        }
        .note {
            background-color: #f0f9ff;
            border-left: 4px solid #0ea5e9;
            padding: 16px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Marketing Mix Modeling Pipeline</h1>

        <div class="intro">
            <p>A sophisticated data pipeline that processes customer data, transactions, and marketing campaigns to create a comprehensive marketing mix model. The system integrates geographic segmentation with customer behavior analysis for targeted marketing insights.</p>
        </div>

        <div class="section">
            <h2>System Architecture Overview</h2>
            <div class="note">
                This diagram shows the high-level data flow from source systems through transformation stages to final model output.
            </div>
            <div class="mermaid">
                flowchart TB
                    linkStyle default stroke-width:1px;
                    subgraph "Source Layer"
                        A1["Customer Database"]
                        A2["Transaction Data"]
                        A3["Marketing Campaign Data"]
                        A4["Geographic Data"]
                        A5["Location Data"]
                    end

                    subgraph "Integration Layer"
                        B1["Geographic Mapping"]
                        B2["Customer Location"]
                        B3["Customer Base"]
                        B4["Product Categories"]
                        B5["Time Series Data"]
                    end

                    subgraph "Analytics Layer"
                        C1["Loyalty Analytics"]
                        C2["Membership Analysis"]
                        C3["Customer Segmentation"]
                        C4["Growth Metrics"]
                    end

                    subgraph "Campaign Layer"
                        D1["Campaign Setup"]
                        D2["Response Tracking"]
                        D3["Geographic Analysis"]
                        D4["Performance Analytics"]
                    end

                    Z["Marketing Mix Model"]

                    A1 & A2 & A3 & A4 & A5 --> B1 & B2
                    B1 & B2 --> B3 --> B4 --> B5
                    B5 --> C1 & C2 & C3 & C4
                    B5 --> D1 --> D2 --> D3 --> D4
                    C1 & C2 & C3 & C4 & D4 --> Z
            </div>
        </div>

        <div class="section">
            <h2>Data Model Relationships</h2>
            <div class="note">
                Entity relationship diagram showing the core data model and key relationships between components.
            </div>
            <div class="mermaid">
                %%{ init: { 
                    "theme": "base",
                    "themeVariables": {
                        "primaryColor": "#E3F2FD",
                        "primaryTextColor": "#1565C0",
                        "primaryBorderColor": "#90CAF9",
                        "lineColor": "#1565C0",
                        "nodeBorder": "#1565C0",
                        "mainBkg": "#FFFFFF",
                        "clusterBkg": "#F8F9FA",
                        "edgeLabelBackground": "#FFFFFF"
                    },
                    "er": { 
                        "linkStyle": { "stroke-width": 1 } 
                    }
                } }%%
                erDiagram
                    LOCATION_MAPPING ||--o{ CUSTOMER_LOCATION : "defines"
                    CUSTOMER_LOCATION ||--o{ CUSTOMER_BASE : "belongs to"
                    CUSTOMER_BASE ||--|{ PRODUCT_CATEGORIES : "purchases in"
                    PRODUCT_CATEGORIES ||--|{ TIME_SERIES : "tracked over"
                    TRANSACTION_DATA }|--|| MEMBER_BENEFITS : "earns"
                    LOYALTY_BASE }|--|| MODEL_OUTPUT : "influences"
                    MEMBER_METRICS }|--|| MODEL_OUTPUT : "contributes to"
                    CUSTOMER_STATUS }|--|| MODEL_OUTPUT : "affects"
                    CAMPAIGN_METRICS }|--|| MODEL_OUTPUT : "drives"
            </div>
        </div>

        <div class="section">
            <h2>ETL Process Flow</h2>
            <div class="note">
                Detailed transformation pipeline showing data processing stages and dependencies.
            </div>
            <div class="mermaid">
                flowchart TD
                    linkStyle default stroke-width:1px;
                    subgraph "Data Integration"
                        S1["Geographic Processing"] --> S2["Customer Integration"]
                        S2 --> S3["Product Mapping"]
                        S3 --> S4["Time Series Creation"]
                    end

                    subgraph "Metrics Processing"
                        M1["Transaction Analysis"] --> M2["Loyalty Calculations"]
                        M2 --> M3["Customer Metrics"]
                        M3 --> M4["Growth Analytics"]
                    end

                    subgraph "Campaign Analysis"
                        C1["Campaign Setup"] --> C2["Response Tracking"]
                        C2 --> C3["Performance Metrics"]
                        C3 --> C4["ROI Analysis"]
                    end

                    S4 --> M1
                    M4 --> F1["Model Input Preparation"]
                    C4 --> F1
                    F1 --> F2["Final Model"]
            </div>
        </div>

        <div class="section">
            <h2>Geographic Segmentation</h2>
            <div class="note">
                Market structure showing geographic hierarchy and segmentation approach.
            </div>
            <div class="mermaid">
                flowchart TD
                    linkStyle default stroke-width:1px;
                    Market["Market Segments"] --> Market1["Urban Markets"] & Market2["Rural Markets"]
                    Market1 --> Cities["Major Metropolitan Areas"]
                    Market2 --> Regions["Regional Zones"]
                    Cities & Regions --> Sub["Local Market Areas"]
            </div>
        </div>

        <div class="section">
            <h2>Key Components</h2>
            <div class="table-description">
                <div class="table-card">
                    <h3>Integration Layer</h3>
                    <p>Combines customer data with geographic and product information to create a unified view of customer behavior across markets.</p>
                    <p><strong>Key processes:</strong> Location mapping, customer profiling, product categorization</p>
                </div>

                <div class="table-card">
                    <h3>Analytics Layer</h3>
                    <p>Processes customer interactions and campaign responses to generate insights on marketing effectiveness.</p>
                    <p><strong>Key metrics:</strong> Response rates, conversion metrics, customer lifetime value</p>
                </div>

                <div class="table-card">
                    <h3>Campaign Layer</h3>
                    <p>Tracks and analyzes marketing campaign performance across different channels and segments.</p>
                    <p><strong>Focus areas:</strong> Channel effectiveness, segment response, ROI analysis</p>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>Model Metrics</h2>
            <div class="metrics-list">
                <div class="metrics-category">
                    <h4>Customer Metrics</h4>
                    <ul>
                        <li>Loyalty Program Engagement</li>
                        <li>Customer Lifetime Value</li>
                        <li>Purchase Frequency</li>
                        <li>Category Penetration</li>
                    </ul>
                </div>

                <div class="metrics-category">
                    <h4>Campaign Metrics</h4>
                    <ul>
                        <li>Response Rates</li>
                        <li>Channel Performance</li>
                        <li>Geographic Response</li>
                        <li>Campaign ROI</li>
                    </ul>
                </div>

                <div class="metrics-category">
                    <h4>Business Metrics</h4>
                    <ul>
                        <li>Category Performance</li>
                        <li>Market Share</li>
                        <li>Revenue Growth</li>
                        <li>Customer Acquisition Cost</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        mermaid.initialize({
            theme: 'base',
            flowchart: {
                curve: 'basis',
                padding: 20
            },
            themeVariables: {
                primaryColor: '#E3F2FD',
                primaryTextColor: '#1565C0',
                primaryBorderColor: '#90CAF9',
                lineColor: '#1565C0',
                secondaryColor: '#F3E5F5',
                tertiaryColor: '#FFF3E0',
                mainBkg: '#FFFFFF',
                nodeBorder: '#1565C0',
                clusterBkg: '#F8F9FA',
                clusterBorder: '#E3F2FD',
                titleColor: '#1565C0',
                edgeLabelBackground: '#FFFFFF',
                link: {
                    stroke: '#1565C0',
                    'stroke-width': 1
                }
            },
            securityLevel: 'loose',
            fontFamily: 'Inter',
        });
    </script>
</body>
</html> 